<!DOCTYPE html>
<html lang="en" class="min-h-full">
{% from 'partials/_toggle_switch.html' import toggle_switch %}
{% include 'partials/_dark_mode_init.html' %}

<head>
    {% include 'partials/_base_head.html' %}

    {# Page-specific SEO meta tags #}
    {% set title = "Wordle Global - " ~ (languages | length) ~ " languages available" %}
    {% set description = "Wordle, the daily word puzzle. Free, Open-Source & available in (most) languages" %}
    <title>{{ title }}</title>
    <meta name="description" content="{{ description }}">
    <meta property="description" content="{{ description }}">
    <meta name="keywords" content="wordle, english, puzzle, word, play, game, online, guess, free, daily">
    <meta property="og:title" content="{{ title }}">
    <meta property="og:url" content="https://wordle.global/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="{{ description }}">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="wordle.global">
    <meta property="twitter:url" content="https://wordle.global/">
    <meta property="twitter:title" content="{{ title }}">
    <meta property="twitter:description" content="{{ description }}">

    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

    <!-- Bing search console -->
    <meta name="msvalidate.01" content="609E2DD36EFFA9A3C673F46020FDF0D3" />

    <!-- Backend data (on window for ES module access) -->
    <script>
        window.languages = JSON.parse('{{languages | tojson | safe}}');
        window.todays_idx = "{{todays_idx}}";
        window.other_wordles = JSON.parse('{{other_wordles | tojson | safe}}');
        window.language_popularity = JSON.parse('{{language_popularity | tojson | safe}}');
    </script>
</head>

<body class="min-h-[100dvh] bg-white dark:bg-neutral-900 text-black dark:text-white transition-colors">
    {% include 'partials/_loading_skeleton.html' %}

    <div id="app" class="pb-12" style="display: none;">

        <!-- The Header -->
        <header class="relative flex flex-row justify-between items-center p-1 px-3 lg:px-1 h-[50px] my-auto border-b border-neutral-300 dark:border-neutral-600 max-w-screen-sm mx-auto">
            <button class="z-30 text-neutral-500 dark:text-neutral-400" v-on:click="showAboutModal = !showAboutModal" aria-label="about">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-info-circle" width="24"
                    height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <circle cx="12" cy="12" r="9"></circle>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    <polyline points="11 12 12 12 12 16 13 16"></polyline>
                </svg>
            </button>
            <div class="absolute right-0 left-0 text-center">
                <h1 class="uppercase font-bold text-xl tiny:text-3xl sm:text-4xl tracking-wider"><a href="/">WORDLE
                        üåç</a></h1>
            </div>
            <div class="flex flex-row gap-3 z-30">
                <button class="m-0 sm:my-1 text-neutral-500 dark:text-neutral-400" v-on:click="showStatsModal = !showStatsModal" aria-label="statistics">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" width="24" height="24"
                        viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <rect x="3" y="12" width="6" height="8" rx="1"></rect>
                        <rect x="9" y="8" width="6" height="12" rx="1"></rect>
                        <rect x="15" y="4" width="6" height="16" rx="1"></rect>
                        <line x1="4" y1="20" x2="18" y2="20"></line>
                    </svg>
                </button>
                <button class="m-0 sm:my-1 text-neutral-500 dark:text-neutral-400" v-on:click="showSettingsModal = !showSettingsModal" aria-label="settings">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" width="24" height="24"
                        viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </button>
            </div>
        </header>

        <!-- language search box -->
        <div class="flex justify-center mt-12">
            <div class="flex flex-col break-words bg-white dark:bg-neutral-800 border-2 border-neutral-300 dark:border-neutral-600 rounded shadow-md mx-4 mb-2 sm:mb-6 w-full max-w-xs md:max-w-sm lg:max-w-md">
                <input v-model="search_text"
                    class="shadow appearance-none w-full py-2 px-3 text-gray-700 dark:text-gray-200 dark:bg-neutral-800 leading-tight focus:outline-none focus:shadow-outline hover:shadow-xl"
                    type="text" placeholder="{{ ui.search_language or 'Search language...' }}">
            </div>
        </div>

        <!-- tailwind grid of language cards that fill max space -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-7 mt-7 sm:gap-10 sm:mt-10 md:gap-14 mt-14 w-2/3 mx-auto">
            <!-- card for each language -->
            <button v-for="language in languages_vis" class="group col-span-1 cursor-pointer rounded-lg shadow-lg hover:shadow-2xl"
                v-on:click='selectLanguageWithCode(language.language_code)'>
                <div class="h-full border-2 rounded-lg group-hover:font-bold transition-colors"
                    :class="hasPlayed(language.language_code) ? 'border-green-400 dark:border-green-600 bg-green-50 dark:bg-green-900/20 group-hover:bg-green-100 dark:group-hover:bg-green-900/40' : 'border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 group-hover:bg-neutral-100 dark:group-hover:bg-neutral-700'">
                    <div class="px-5 py-4 relative">
                        <!-- Streak badge (top right) -->
                        <span v-if="getCurrentStreak(language.language_code) > 0"
                            class="absolute top-2 right-2 text-orange-500 dark:text-orange-400 text-xs font-bold flex items-center gap-0.5">
                            <span>üî•</span>[[ getCurrentStreak(language.language_code) ]]
                        </span>
                        <!-- Checkmark for played but no streak -->
                        <span v-else-if="hasPlayed(language.language_code)"
                            class="absolute top-2 right-2 text-green-500 dark:text-green-400 text-xs">‚úì</span>

                        <h5 class="text-center">[[ language.language_name_native ]]</h5>
                        <p class="text-sm italic text-neutral-600 dark:text-neutral-400 text-center">[[ language.language_name ]]</p>

                        <!-- Games played indicator -->
                        <p v-if="hasPlayed(language.language_code)"
                            class="text-xs text-neutral-500 dark:text-neutral-500 text-center mt-1">
                            [[ getGamesPlayed(language.language_code) ]] game<span v-if="getGamesPlayed(language.language_code) !== 1">s</span>
                            ¬∑ [[ Math.round(getWinRate(language.language_code)) ]]% wins
                        </p>
                    </div>
                </div>
            </button>
        </div>


        <!-- separator -->
        <div class="w-full mt-16 mx-auto text-center">
            <hr class="border-b-1 border-gray-400 dark:border-gray-600 w-1/2 mx-auto">
            <h2 class="text-2xl text-neutral-500 dark:text-neutral-400 mt-4">
                {{ ui.external_links or "External Links" }}
            </h2>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-16 mt-16 w-2/3 mx-auto">
            <!-- vue for each item in other_wordles make a button that leads to item.url when clicked -->
            <button v-for="other_wordle in other_wordles_vis"
                class="col-span-1 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-lg shadow-lg" v-on:click="openLink(other_wordle.url)">
                <div class="shadow-lg h-full border-2 border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 rounded-lg hover:shadow-2xl hover:font-bold">
                    <div class="px-5 py-4">
                        <h5 class="">[[ other_wordle.name ]]</h5>
                        <p class="text-sm italic text-neutral-600 dark:text-neutral-400">[[ other_wordle.language ]]</p>
                    </div>
                </div>
            </button>
        </div>


        <!-- NOTIFICATIONS & MODALS-->
        <div class="container mx-auto flex w-full max-w-lg justify-center items-center overflow-auto z-1" v-cloak>
            {% set modals = "showAboutModal || showStatsModal || showSettingsModal" %}
            {% include 'partials/_modal_backdrop.html' %}

            <!-- About modal -->
            <div v-show="showAboutModal" class="fixed top-10 left-0 w-full h-full z-50 items-center overflow-auto"
                v-cloak>
                <div class="bg-white dark:bg-neutral-800 rounded-lg shadow-lg p-5 m-4 border-2 border-slate-200 dark:border-neutral-600 mx-auto w-full max-w-xs sm:max-w-lg"
                    v-cloak>
                    <div class="flex flex-col gap-2 relative ">
                        <button type="button" v-on:click="showAboutModal = false" aria-label="Close" class="absolute top-0 right-0 p-1 ml-auto z-50">
                            <span class="leading-[0.25] h-5 w-5 text-3xl text-neutral-400 block outline-none focus:outline-none">√ó</span>
                        </button>
                        <h3 class="flex mx-auto uppercase font-bold text-2xl tracking-wider mb-2">{{ ui.about or "About" }}</h3>
                        <p class="text-center text-sm">Hi! You probably know about Wordle already. It's a <span
                                class="italic">really</span> fun game.</p>
                        <p class="text-center text-sm">My skills are mostly in backend/ML, with lacking
                            frontend experience. I wanted to change that, so why not recreate one of my favorite
                            current
                            games? The aim was to make something useful whilst also getting comfortable with TailwindCSS & Vue.js</p>
                        <p class="text-center text-sm">The whole thing is open-source, and you can (and actually,
                            please
                            do) suggest improvements or fixes over at <a href="https://github.com/Hugo0/wordle/issues"
                                class="text-neutral-500 dark:text-neutral-400 underline">GitHub</a></p>
                        <p class="text-center text-sm">There's fun languages, like Klingon or
                            Tolkien's Elvish that you can measure yourself on, as well as right to left languages like Arabic or
                            Hebrew. Stats <a href="/stats" target="_blank" class="text-neutral-500 dark:text-neutral-400 underline">here</a>.</p>
                        <p class="text-center text-sm">A lot of other great Wordle spin-offs exist, and I've linked a bunch below for easy access. (credit: <a href="https://rwmpelstilzchen.gitlab.io/wordles/" class="text-neutral-500 dark:text-neutral-400 underline">Wordles of the World</a>)</p>
                        <p class="text-center text-sm">Have fun, and I hope you enjoy!</p>
                    </div>
                </div>
            </div>

            <div v-show="showStatsModal" class="fixed top-10 left-0 w-full h-full z-50 items-center overflow-auto" v-cloak>
                <div class="bg-white dark:bg-neutral-800 rounded-lg shadow-lg p-5 m-4 border-2 border-slate-200 dark:border-neutral-600 mx-auto w-full max-w-md sm:max-w-lg"
                    v-cloak>
                    <div class="flex flex-col gap-2 relative">
                        <button type="button" v-on:click="showStatsModal = false" aria-label="Close" class="absolute top-0 right-0 p-1 ml-auto z-50">
                            <span class="leading-[0.25] h-5 w-5 text-3xl text-neutral-400 block outline-none focus:outline-none">√ó</span>
                        </button>
                        <h3 class="flex mx-auto uppercase font-bold text-2xl tracking-wider mb-2">{{ ui.global_stats or "Global Stats" }}</h3>

                        <!-- Summary stats grid -->
                        <div class="grid grid-cols-2 gap-3 mb-2">
                            <div class="bg-neutral-100 dark:bg-neutral-700 rounded-lg p-3 text-center">
                                <div class="text-2xl font-bold">[[total_stats.total_games || 0]]</div>
                                <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.games_played or "Games Played" }}</div>
                            </div>
                            <div class="bg-neutral-100 dark:bg-neutral-700 rounded-lg p-3 text-center">
                                <div class="text-2xl font-bold">[[Math.round(total_stats.total_win_percentage || 0)]]%</div>
                                <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.win_rate or "Win Rate" }}</div>
                            </div>
                            <div class="bg-neutral-100 dark:bg-neutral-700 rounded-lg p-3 text-center">
                                <div class="text-2xl font-bold">
                                    <span v-if="total_stats.current_overall_streak > 0">üî•</span>[[total_stats.current_overall_streak || 0]]
                                </div>
                                <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.current_streak or "Current Streak" }}</div>
                            </div>
                            <div class="bg-neutral-100 dark:bg-neutral-700 rounded-lg p-3 text-center">
                                <div class="text-2xl font-bold">[[total_stats.languages_won?.length || 0]]</div>
                                <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.languages_won or "Languages Won" }}</div>
                            </div>
                        </div>

                        <!-- Best streaks -->
                        <div class="flex flex-row text-sm">
                            <div class="flex-grow text-neutral-600 dark:text-neutral-400">{{ ui.best_overall_streak or "Best Overall Streak" }}:</div>
                            <div class="font-bold">[[total_stats.longest_overall_streak || 0]]</div>
                        </div>
                        <div class="flex flex-row text-sm" v-if="total_stats.current_longest_language_streak_language">
                            <div class="flex-grow text-neutral-600 dark:text-neutral-400">
                                {{ ui.best_active_streak or "Best Active Streak" }} ([[languages[total_stats.current_longest_language_streak_language]?.language_name]]):
                            </div>
                            <div class="font-bold">üî• [[total_stats.current_longest_language_streak]]</div>
                        </div>

                        <!-- Per-language breakdown -->
                        <div class="flex flex-row mt-4 mb-2">
                            <div class="flex-grow uppercase tracking-wider font-bold text-sm">{{ ui.your_languages or "Your Languages" }}</div>
                        </div>

                        <div v-if="Object.keys(total_stats.game_stats || {}).length === 0" class="text-sm text-neutral-500 dark:text-neutral-400">
                            {{ ui.no_games_yet or "You haven't played any games yet. Pick a language to start!" }}
                        </div>

                        <!-- Language list with expandable details -->
                        <div class="flex flex-col gap-2 max-h-64 overflow-y-auto">
                            <div v-for="(stats, lang_code) in total_stats.game_stats" :key="lang_code"
                                class="border border-neutral-200 dark:border-neutral-600 rounded-lg overflow-hidden">
                                <!-- Language header (clickable) -->
                                <button v-on:click="toggleLanguageExpansion(lang_code)"
                                    class="w-full flex items-center justify-between p-3 hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors cursor-pointer">
                                    <div class="flex items-center gap-2">
                                        <span class="font-medium">[[languages[lang_code]?.language_name_native]]</span>
                                        <span class="text-xs text-neutral-500 dark:text-neutral-400">[[languages[lang_code]?.language_name]]</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span v-if="stats.current_streak > 0" class="text-orange-500 text-sm font-bold">üî•[[stats.current_streak]]</span>
                                        <span class="text-sm text-neutral-500 dark:text-neutral-400">[[stats.n_games]] games</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-neutral-400 transition-transform"
                                            :class="expandedLanguage === lang_code ? 'rotate-180' : ''"
                                            viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                        </svg>
                                    </div>
                                </button>
                                <!-- Expanded details -->
                                <div v-show="expandedLanguage === lang_code"
                                    class="px-3 pb-3 pt-1 border-t border-neutral-200 dark:border-neutral-600 bg-neutral-50 dark:bg-neutral-700/50">
                                    <div class="grid grid-cols-3 gap-2 text-center text-sm">
                                        <div>
                                            <div class="font-bold text-green-600 dark:text-green-400">[[stats.n_wins]]</div>
                                            <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.wins or "Wins" }}</div>
                                        </div>
                                        <div>
                                            <div class="font-bold text-red-600 dark:text-red-400">[[stats.n_losses]]</div>
                                            <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.losses or "Losses" }}</div>
                                        </div>
                                        <div>
                                            <div class="font-bold">[[Math.round(stats.win_percentage)]]%</div>
                                            <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.win_rate or "Win Rate" }}</div>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-2 text-center text-sm mt-2">
                                        <div>
                                            <div class="font-bold">[[stats.avg_attempts?.toFixed(1) || '-']]</div>
                                            <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.avg_attempts or "Avg Attempts" }}</div>
                                        </div>
                                        <div>
                                            <div class="font-bold">[[stats.longest_streak]]</div>
                                            <div class="text-xs text-neutral-500 dark:text-neutral-400">{{ ui.best_streak or "Best Streak" }}</div>
                                        </div>
                                    </div>
                                    <button v-on:click.stop="selectLanguageWithCode(lang_code)"
                                        class="w-full mt-3 py-2 bg-green-500 hover:bg-green-600 text-white text-sm font-medium rounded transition-colors">
                                        {{ ui.play or "Play" }} [[languages[lang_code]?.language_name]]
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Settings modal -->
            <div v-show="showSettingsModal" class="fixed top-10 left-0 w-full h-full z-50 items-center overflow-auto"
                v-cloak>
                <div class="bg-white dark:bg-neutral-800 rounded-lg shadow-lg p-5 m-4 border-2 border-slate-200 dark:border-neutral-600 mx-auto w-full max-w-xs sm:max-w-md"
                    v-cloak>
                    <div class="flex flex-col gap-4 relative">
                        <button type="button" v-on:click="showSettingsModal = false" aria-label="Close" class="absolute top-0 right-0 p-1 ml-auto z-50">
                            <span class="leading-[0.25] h-5 w-5 text-3xl text-neutral-400 block outline-none focus:outline-none">√ó</span>
                        </button>
                        <h3 class="flex mx-auto uppercase font-bold text-2xl tracking-wider mb-2">{{ ui.settings or "Settings" }}</h3>

                        <!-- Dark Mode Toggle -->
                        <div class="flex flex-row items-center justify-between">
                            <div class="flex flex-col">
                                <span class="font-medium">{{ ui.dark_mode or "Dark Mode" }}</span>
                                <span class="text-sm text-neutral-500 dark:text-neutral-400">{{ ui.dark_mode_desc or "Toggle dark theme" }}</span>
                            </div>
                            {{ toggle_switch('darkMode', 'toggleDarkMode()', ui.dark_mode or 'Dark Mode') }}
                        </div>

                        <!-- Separator -->
                        <hr class="border-neutral-300 dark:border-neutral-600">

                        <!-- Sound & Haptics Toggle -->
                        <div class="flex flex-row items-center justify-between">
                            <div class="flex flex-col">
                                <span class="font-medium">{{ ui.sound_and_haptics or "Sound & Haptics" }}</span>
                            </div>
                            {{ toggle_switch('feedbackEnabled', 'toggleFeedback()', ui.sound_and_haptics or 'Sound & Haptics') }}
                        </div>

                        <!-- Separator -->
                        <hr class="border-neutral-300 dark:border-neutral-600">

                        <!-- Install App button (only shown when not already installed) -->
                        <div v-if="canInstallPwa()" class="pt-2">
                            <button @click="installPwa()"
                                class="w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M12 18h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5"></path>
                                    <path d="M16 19h6"></path>
                                    <path d="M19 16v6"></path>
                                </svg>
                                {{ ui.install_app or "Install App" }}
                            </button>
                            <p class="text-xs text-center text-neutral-500 dark:text-neutral-400 mt-1">{{ ui.install_app_desc or "Play offline & get app icon" }}</p>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <!-- Popup for if a language is unavailable -->
        <div id="popup" v-if="showPopup" class="fixed top-0 left-0 w-full h-full z-50" v-cloak>
            <div class="flex items-center justify-center w-full h-full">
                <div class="bg-white dark:bg-neutral-800 rounded-lg shadow-lg p-4">
                    <div class="flex flex-col items-center">
                        <h3 class="text-2xl font-bold text-center">üë∑üöß</h3>
                        <br>
                        <p class="text-center">[[clickedLanguage]] &nbsp; {{ ui.coming_soon or "is coming soon!" }}</p>
                        <button class="mt-4" v-on:click="showPopup = false">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- shadow -->
        <div v-if="showPopup" class="opacity-25 fixed top-0 left-0 w-full h-full z-1 bg-black"></div>

    </div>

    {% include 'partials/_pwa_install.html' %}

    <script type="module" src="{{ vite_assets.js }}"></script>
</body>

</html>
